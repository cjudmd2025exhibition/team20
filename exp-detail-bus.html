<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RIPPLE</title>
  <meta name="description" content="작은 실천이 연결되는 친환경 플랫폼, RIPPLE" />
  <!-- Pretendard CDN -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretendard/dist/web/static/pretendard.css" />
  <!-- Remix Icon CDN -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css" rel="stylesheet" />
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body class="bg-[#0b0c0e] text-white font-sans antialiased">

<!-- Header -->
<header class="header">
  <div class="header-inner">
    <a href="./index.html" class="logo">
      <img src="./assets/logo.png" alt="RIPPLE" class="logo-img">
    </a>
    <nav class="nav">
      <a href="./index.html">HOME</a>
      <a href="./about.html">ABOUT</a>
      <a href="./guide.html">GUIDE</a>
      <a href="./experience.html">EXPERIENCE</a>
    </nav>
    <button id="menuBtn" class="menu-btn" aria-label="메뉴 열기">☰</button>
  </div>
  <div id="mobileMenu" class="mobile-menu" aria-hidden="true">
    <a href="./index.html">HOME</a>
    <a href="./about.html">ABOUT</a>
    <a href="./guide.html">GUIDE</a>
    <a href="./experience.html">EXPERIENCE</a>
  </div>
</header>

<main class="experience">
  <div class="experience-inner">
    <h2 class="experience-title breadcrumb" aria-label="breadcrumb">
      <a href="./experience.html" class="crumb is-root">library</a>
      <span class="sep" aria-hidden="true">›</span>
      <span class="crumb is-muted">대중교통 챌린지</span>
    </h2>
    
    <!-- 검색창 (비활성화) -->
    <div class="exp-detail-searchbox">
      <input type="text" placeholder="대중교통 챌린지 갤러리" class="exp-detail-search" style="color: #1a1a1a !important; --placeholder-color: #1a1a1a;" disabled readonly>
    </div>
    
    <!-- 대중교통 갤러리 섹션 -->
    <section class="exp01">
      <div class="exp01-inner">
        <div class="exp-grid">
          <a href="./bus/bus-01.html" class="exp-card" data-post-id="bus-1">
            <img src="./busimg/01.png" alt="서울시 대중교통 이용" class="exp-card__img">
            <span class="exp-card__tag">서울시 대중교통 이용</span>
            <div class="exp-card__rule"></div>
          </a>
          <a href="./bus/bus-02.html" class="exp-card" data-post-id="bus-2">
            <img src="./busimg/02.png" alt="친환경 교통수단" class="exp-card__img">
            <span class="exp-card__tag">친환경 교통수단</span>
            <div class="exp-card__rule"></div>
          </a>
          <a href="./bus/bus-03.html" class="exp-card" data-post-id="bus-3">
            <img src="./busimg/03.png" alt="지하철과 버스 이용" class="exp-card__img">
            <span class="exp-card__tag">지하철과 버스 이용</span>
            <div class="exp-card__rule"></div>
          </a>
          <a href="./bus/bus-04.html" class="exp-card" data-post-id="bus-4">
            <img src="./busimg/04.png" alt="대중교통 챌린지 참여" class="exp-card__img">
            <span class="exp-card__tag">대중교통 챌린지 참여</span>
            <div class="exp-card__rule"></div>
          </a>
          <a href="./bus/bus-05.html" class="exp-card" data-post-id="bus-5">
            <img src="./busimg/05.png" alt="버스 정류장 주변 정리" class="exp-card__img">
            <span class="exp-card__tag">버스 정류장 주변 정리</span>
            <div class="exp-card__rule"></div>
          </a>
          <a href="./bus/bus-06.html" class="exp-card" data-post-id="bus-6">
            <img src="./busimg/06.png" alt="환승으로 빠르게 이동" class="exp-card__img">
            <span class="exp-card__tag">환승으로 빠르게 이동</span>
            <div class="exp-card__rule"></div>
          </a>
          <a href="./bus/bus-07.html" class="exp-card" data-post-id="bus-7">
            <img src="./busimg/07.png" alt="대중교통으로 나들이" class="exp-card__img">
            <span class="exp-card__tag">대중교통으로 나들이</span>
            <div class="exp-card__rule"></div>
          </a>
          <a href="./bus/bus-08.html" class="exp-card" data-post-id="bus-8">
            <img src="./busimg/08.png" alt="걷기 + 버스 출근" class="exp-card__img">
            <span class="exp-card__tag">걷기 + 버스 출근</span>
            <div class="exp-card__rule"></div>
          </a>
          <a href="./bus/bus-09.html" class="exp-card" data-post-id="bus-9">
            <img src="./busimg/09.png" alt="대중교통 챌린지 인증" class="exp-card__img">
            <span class="exp-card__tag">대중교통 챌린지 인증</span>
            <div class="exp-card__rule"></div>
          </a>
          <a href="./bus/bus-10.html" class="exp-card" data-post-id="bus-10">
            <img src="./busimg/10.png" alt="오늘도 대중교통" class="exp-card__img">
            <span class="exp-card__tag">오늘도 대중교통</span>
            <div class="exp-card__rule"></div>
          </a>
        </div>
      </div>
    </section>
  </div>
</main>

<!-- 함께 참여하기 버튼 -->
<div class="fixed-participate-btn">
  <a href="./exp01_share.html?type=bus" class="participate-btn">
    <i class="ri-add-line"></i>
    함께 참여하기
  </a>
</div>

<!-- Footer -->
<footer class="footer">
  <div class="footer-inner">
    <div class="footer-col brand-col">
      <div class="brand">
        <img src="./assets/logo.png" alt="RIPPLE 로고" class="ripple-logo-footer"> 
      </div>
      <p class="brand-sub">더 나은 세상을 위한 제안</p>
      <div class="socials">
        <a class="social" href="#" aria-label="Instagram"><i class="ri-instagram-line"></i></a>
        <a class="social" href="#" aria-label="YouTube"><i class="ri-youtube-line"></i></a>
        <a class="social" href="#" aria-label="X"><i class="ri-twitter-x-line"></i></a>
        <a class="social" href="#" aria-label="Email"><i class="ri-mail-line"></i></a>
      </div>
      <p class="legal">© 2025 RIPPLE. All rights reserved. contact@rpl.app</p>
    </div>

 <!-- 오른쪽: 메뉴 -->
    <div class="footer-right">
      <ul class="links-list">
        <li><a href="#home">HOME</a></li>
        <li><a href="#about">ABOUT</a></li>
        <li><a href="#guide">GUIDE</a></li>
        <li><a href="#experience">EXPERIENCE</a></li>
      </ul>
    </div>
  </div>
</footer>

  <script src="./script.js"></script>
  <script>
    // 페이지 로드 시 localStorage에서 게시물 불러오기
    document.addEventListener('DOMContentLoaded', function() {
      // 약간의 지연을 두어 기존 카드들이 먼저 렌더링되도록 함
      setTimeout(function() {
        loadNewPostsFromStorage();
      }, 100);
    });

    function loadNewPostsFromStorage() {
      const posts = JSON.parse(localStorage.getItem('busPosts') || '[]');
      const expGrid = document.querySelector('.exp-grid');
      
      if (!expGrid) {
        console.log('Exp grid not found');
        return;
      }
      
      // 기존 카드들 (bus-로 시작하는 ID를 가진 카드들)
      const existingCards = expGrid.querySelectorAll('.exp-card[data-post-id]');
      const existingPostIds = Array.from(existingCards).map(card => card.getAttribute('data-post-id'));
      
      console.log('Existing post IDs:', existingPostIds);
      console.log('Loaded posts from storage:', posts);
      
      // 새로운 게시물만 추가 (기존 카드들은 건드리지 않음)
      if (posts.length > 0) {
        posts.forEach((post) => {
          // 숫자 ID만 확인 (bus-로 시작하는 ID는 기존 카드)
          if (post.id && typeof post.id === 'number' && !existingPostIds.includes(post.id.toString())) {
            const newCard = createCardElement(post);
            newCard.setAttribute('data-post-id', post.id);
            expGrid.insertBefore(newCard, expGrid.firstChild);
            console.log('New card added:', post.title);
          }
        });
      }
    }

    function createCardElement(post) {
      const card = document.createElement('a');
      card.href = `./exp-detail01.html?type=bus&id=${encodeURIComponent(post.id)}`;
      card.className = 'exp-card';
      card.setAttribute('data-post-id', post.id);
      card.addEventListener('click', function(e) {
        // 클릭한 게시물의 ID를 localStorage에 저장
        localStorage.setItem('selectedPostId', post.id);
      });
      card.innerHTML = createCardHTML(post);
      return card;
    }

    function createCardHTML(post) {
      const titleText = post.title || post.tags || '새로운 활동';
      const contentText = post.content || '';
      
      // 이미지가 있는 경우와 없는 경우를 구분
      if (post.image) {
        return `
          <img src="${post.image}" alt="대중교통 활동" class="exp-card__img">
          <span class="exp-card__tag">${titleText}</span>
          <div class="exp-card__rule"></div>
        `;
      } else {
        return `
          <div class="exp-card__text-content">
            <p class="exp-card__description-text">${contentText}</p>
          </div>
          <span class="exp-card__tag">${titleText}</span>
          <div class="exp-card__rule"></div>
        `;
      }
    }
  </script>
</body>
</html>


